!function(o){function s(t){this.animation=t.animation,this.toggler=t.toggler,this.className=t.className,this.exceptions=t.exceptions,this.init=function(){var e=this,t=this.implode(this.exceptions),t=(void 0!==t&&o(document).on("click",t,function(t){t.stopPropagation()}),this.implode(this.toggler));void 0!==t&&o(document).on("click",t,function(t){t.stopPropagation(),t.preventDefault(),e.toggle()})},this.toggle=function(){var t=this.implode(this.animation);void 0!==t&&(o(t).toggleClass(this.className),(o(t).hasClass(this.className)?o(".multi-store-menu-list > li:first-child a"):o("#menu-icon")).focus())},this.implode=function(t,e){if(!(t instanceof Array))return t;void 0===e&&(e=",");for(var i="",n=0;n<t.length;n++)i+=t[n],n!==t.length-1&&(i+=e);return i}}o.fn.multiStoreMobileMenu=function(t){var n={icon:"#menu-icon",closeIcon:!0,overlay:!0},e=(o.extend(n,t),"#"+this.attr("id"));if(!o(e).length)return console.error("Selected Element not found in DOM (Mobile menu plugin)"),this;(new function(){var i="<div>"+o(e).html()+"</div>",t=this,i=o(i).find("*").each(function(t,e){var i=o(e).attr("id");i&&o(e).attr("id","multi-store-"+i)});this.init=function(){o(document).ready(function(){t.createMenu(),t.addDownArrow(),t.toggleSubUl(),t.menuToggler(),t.addClassOnFirstUl()})},this.createMenu=function(){var t=n.closeIcon?this.closeMenuIcon():null,e=n.overlay?this.addOverlay():null;o("body").append('<div class="multi-store-mobile-menu" id="multi-store-mobile-menu">'+t+'<ul class="multi-store-menu-list">'+i.html()+'</ul><button class="circular-focus screen-reader-text" data-goto=".multi-store-inner-box">Circular focus</button></div>'+e)},this.closeMenuIcon=function(){return'<div class="multi-store-close-wrapper"><button data-goto=".multi-store-menu-list > li:last-child a" class="circular-focus screen-reader-text">circular focus</button> <button tabindex="0" class="multi-store-inner-box" id="multi-store-close"><span class="screen-reader-text">close</span><span class="multi-store-inner"></span></button> </div>'},this.addOverlay=function(){return'<div class="multi-store-mobile-menu-overlay"></div>'},this.addClassOnFirstUl=function(){o("#multi-store-mobile-menu ul").first().hasClass("menu")||o("#multi-store-mobile-menu ul").first().addClass("menu")},this.addDownArrow=function(){var t=o("#multi-store-mobile-menu"),e=o("#multi-store-mobile-menu .menu-item-has-children");(0<t.find(".menu-item-has-children").length?e:o("#multi-store-mobile-menu ul li:has(ul)")).children("a").append('<a href="#" class="multi-store-arrow-box"><span class="multi-store-down-arrow"></span></a>')},this.toggleSubUl=function(){o(document).on("click",".multi-store-arrow-box",function(t){t.stopPropagation(),t.preventDefault(),o(this).toggleClass("open").parent().next().slideToggle()})},this.menuToggler=function(){new s({animation:[".multi-store-mobile-menu-overlay","#multi-store-mobile-menu","body","#menu-icon"],exceptions:["#multi-store-mobile-menu"],toggler:["#menu-icon",".multi-store-mobile-menu-overlay","#multi-store-close"],className:"multi-store-menu-open"}).init()}}).init()}}(jQuery);